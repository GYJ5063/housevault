{"version":3,"file":"5.a0b418cb9b4c263e2be3.hot-update.js","sources":["webpack:///components/census/CensusAge.js"],"sourcesContent":[" import React from \"react\";\nimport _ from \"lodash\";\nimport {Doughnut, Bar} from 'react-chartjs-2';\n\nclass CensusAge extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            propertyDataLoading: false,\n            census: []\n        }\n    }\n\n    componentDidMount() {\n        this.getCensusGraphs(this.props.areacode);\n    }\n\n    getCensusGraphs(areacode) {\n        this.setState({propertyGraphsLoading: true});\n        let self = this;\n\n        fetch('http://www.nomisweb.co.uk/api/v01/dataset/NM_145_1.jsonstat.json?geography=' + areacode + '&rural_urban=0&measures=20100&_=58527')\n            .then(function (response) {\n                return response.json();\n            }).then(function (census) {\n            let values = census.value;\n            let keys = Object.values(census.dimension.cell.category.label);\n            let table = [];\n            let arr = [];\n\n            _.each(keys, function (k, i) {\n                table[k] = values[i];\n            });\n\n            self.setState(prevState => ({\n                propertyGraphsLoading: false,\n                census: table,\n\n            }));\n        });\n    }\n\n    formatData() {\n\n        let data = this.state.census;\n        let census = {\n            '0 - 14': _.get(data,'Age 0 to 4') + _.get(data,'Age 5 to 7') + _.get(data,'Age 8 to 9') +  _.get(data,'Age 10 to 14') + _.get(data,'Age 15'),\n            '15 - 24': _.get(data,'Age 16 to 17') + _.get(data,'Age 18 to 19') + _.get(data,'Age 20 to 24'),\n            '25 - 44': _.get(data,'Age 25 to 29') + _.get(data,'Age 30 to 44'),\n            '45 - 64' : _.get(data,'Age 45 to 59') + _.get(data,'Age 60 to 64'),\n            '65 +' : _.get(data,'Age 65 to 74') + _.get(data,'Age 75 to 84') + _.get(data,'Age 85 to 89') + _.get(data,'Age 90 and over')\n        };\n\n        return census;\n    }\n\n    render() {\n\n        let census = this.formatData();\n\n        const options = {\n            title: {\n                display:true,\n                text: 'Age'\n            },\n            legend: {\n                display:true,\n                position: 'bottom',\n\n            }};\n\n        const d = {'labels': _.keys(census), datasets: [\n                {\n                    label: 'Age',\n                    data: _.values(census),\n                    backgroundColor: [\n                        'rgba(255, 99, 132, 0.2)',\n                        'rgba(54, 162, 235, 0.2)',\n                        'rgba(255, 206, 86, 0.2)',\n                        'rgba(75, 192, 192, 0.2)',\n                        'rgba(153, 102, 255, 0.2)',\n                        'rgba(255, 99, 132, 0.2)',\n                        'rgba(54, 162, 235, 0.2)',\n                    ],}]\n        };\n        return (\n            <div>\n                <div className=\"row\">\n                    {/*<div className=\"col\">*/}\n                        {/*<div className=\"table-responsive\">*/}\n                            {/*<table className=\"table\">*/}\n                                {/*<tbody>*/}\n                                {/*{ this.props.data.map( ( item ) => (*/}\n                                    {/*<tr key={ item.key } >*/}\n                                        {/*<td>{item.key}</td>*/}\n                                        {/*<td className=\"text-right\">{item.value}</td>*/}\n                                    {/*</tr>*/}\n                                {/*) ) }*/}\n                                {/*</tbody>*/}\n                            {/*</table>*/}\n                        {/*</div>*/}\n                    {/*</div>*/}\n                    <div className=\"col\">\n                        {(this.props.type === 'Bar') ? <Bar data={d} options={options} /> : <Doughnut data={d} options={options} />}\n                    </div>\n                </div>\n            </div>\n            );\n    }\n}\n\n\n\nexport default CensusAge;\n\n\n// WEBPACK FOOTER //\n// components/census/CensusAge.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAFA;AAMA;AACA;;;AACA;AACA;AACA;;;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAAA;AAKA;AACA;;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;;;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AALA;AAWA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AADA;AAcA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AAzGA;AACA;AA6GA;;;;A","sourceRoot":""}